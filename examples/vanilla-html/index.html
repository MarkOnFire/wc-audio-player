<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>WC Audio Player - Vanilla HTML Example</title>

  <!-- Wavesurfer.js (peer dependency) -->
  <script src="https://unpkg.com/wavesurfer.js@7"></script>

  <!-- WC Audio Player CSS -->
  <link rel="stylesheet" href="../../dist/themes/default.css">

  <style>
    * {
      box-sizing: border-box;
    }

    body {
      font-family: system-ui, sans-serif;
      background: #000026;
      color: #FFFAEB;
      padding: 2rem;
      max-width: 900px;
      margin: 0 auto;
    }

    h1 {
      font-size: 2rem;
      margin-bottom: 0.5rem;
    }

    .subtitle {
      color: rgba(255, 250, 235, 0.7);
      margin-bottom: 2rem;
    }

    .example {
      margin-bottom: 3rem;
    }

    .example h2 {
      font-size: 1.25rem;
      margin-bottom: 1rem;
      padding-bottom: 0.5rem;
      border-bottom: 1px solid rgba(255, 250, 235, 0.2);
    }

    code {
      background: rgba(255, 250, 235, 0.1);
      padding: 0.2em 0.4em;
      border-radius: 3px;
      font-size: 0.9em;
    }

    pre {
      background: rgba(255, 250, 235, 0.05);
      padding: 1rem;
      border-radius: 8px;
      overflow-x: auto;
      margin: 1rem 0;
    }

    pre code {
      background: none;
      padding: 0;
    }

    /* Custom theme example */
    .custom-themed {
      --wc-player-bg: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
      --wc-player-play-btn-bg: #e94560;
      --wc-player-progress-color: #e94560;
    }
  </style>
</head>
<body>
  <h1>WC Audio Player</h1>
  <p class="subtitle">A framework-agnostic audio player with waveform visualization</p>

  <!-- Example 1: Basic Usage with Data Attributes -->
  <div class="example">
    <h2>1. Basic Usage (Data Attributes)</h2>
    <p>The simplest way to use the player - just add <code>data-audio-url</code> to any element.</p>

    <div class="wc-audio-player"
         id="player-basic"
         data-audio-url="https://www2.cs.uic.edu/~i101/SoundFiles/BaacMetronome30.wav"
         data-title="Example Audio Track">
      <!-- Player UI is created automatically -->
      <div class="wc-player-controls">
        <button id="player-play-btn" class="wc-player-play-btn" aria-label="Play">
          <span class="wc-player-icon-play">
            <svg viewBox="0 0 24 24" fill="currentColor"><path d="M8 5v14l11-7z"/></svg>
          </span>
          <span class="wc-player-icon-pause" style="display:none">
            <svg viewBox="0 0 24 24" fill="currentColor"><path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z"/></svg>
          </span>
        </button>
        <div id="player-time" class="wc-player-time">0:00 / 0:00</div>
      </div>
      <div id="waveform" class="wc-player-waveform"></div>
    </div>

    <pre><code>&lt;div class="wc-audio-player"
     data-audio-url="https://example.com/audio.mp3"
     data-title="My Episode"&gt;
  &lt;!-- Controls --&gt;
&lt;/div&gt;</code></pre>
  </div>

  <!-- Example 2: Programmatic API -->
  <div class="example">
    <h2>2. Programmatic API</h2>
    <p>Full control with the JavaScript API.</p>

    <div id="player-programmatic" class="wc-audio-player">
      <div class="wc-player-controls">
        <button class="wc-player-play-btn" aria-label="Play">
          <span class="wc-player-icon-play">
            <svg viewBox="0 0 24 24" fill="currentColor"><path d="M8 5v14l11-7z"/></svg>
          </span>
          <span class="wc-player-icon-pause" style="display:none">
            <svg viewBox="0 0 24 24" fill="currentColor"><path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z"/></svg>
          </span>
        </button>
        <div class="wc-player-skip">
          <button class="wc-player-skip-btn wc-player-skip-back" aria-label="Skip back 15 seconds">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M12 5V1L7 6l5 5V7c3.31 0 6 2.69 6 6s-2.69 6-6 6-6-2.69-6-6H4c0 4.42 3.58 8 8 8s8-3.58 8-8-3.58-8-8-8z"/>
              <text x="12" y="14" font-size="6" text-anchor="middle" fill="currentColor" stroke="none">15</text>
            </svg>
          </button>
          <button class="wc-player-skip-btn wc-player-skip-forward" aria-label="Skip forward 15 seconds">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M12 5V1l5 5-5 5V7c-3.31 0-6 2.69-6 6s2.69 6 6 6 6-2.69 6-6h2c0 4.42-3.58 8-8 8s-8-3.58-8-8 3.58-8 8-8z"/>
              <text x="12" y="14" font-size="6" text-anchor="middle" fill="currentColor" stroke="none">15</text>
            </svg>
          </button>
        </div>
        <div class="wc-player-time">0:00 / 0:00</div>
        <button class="wc-player-speed-btn" aria-label="Playback speed: 1x">
          <span class="wc-player-speed-display">1x</span>
        </button>
      </div>
      <div class="wc-player-waveform"></div>
    </div>

    <pre><code>import { createPlayer, analyticsPlugin } from '@wondercabinet/audio-player';

const player = createPlayer({
  container: '#player-programmatic',
  audioUrl: 'https://example.com/audio.mp3',
  features: {
    keyboard: true,
    speed: true,
    skip: { seconds: 15 },
  },
  onReady: () => console.log('Player ready!'),
});

// Add analytics
player.use(analyticsPlugin());</code></pre>
  </div>

  <!-- Example 3: Custom Theme -->
  <div class="example">
    <h2>3. Custom Theme (CSS Variables)</h2>
    <p>Override CSS variables to create custom themes.</p>

    <div id="player-themed" class="wc-audio-player custom-themed">
      <div class="wc-player-controls">
        <button class="wc-player-play-btn" aria-label="Play">
          <span class="wc-player-icon-play">
            <svg viewBox="0 0 24 24" fill="currentColor"><path d="M8 5v14l11-7z"/></svg>
          </span>
          <span class="wc-player-icon-pause" style="display:none">
            <svg viewBox="0 0 24 24" fill="currentColor"><path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z"/></svg>
          </span>
        </button>
        <div class="wc-player-time">0:00 / 0:00</div>
      </div>
      <div class="wc-player-waveform"></div>
    </div>

    <pre><code>.custom-themed {
  --wc-player-bg: linear-gradient(135deg, #1a1a2e, #16213e);
  --wc-player-play-btn-bg: #e94560;
  --wc-player-progress-color: #e94560;
}</code></pre>
  </div>

  <!-- WC Audio Player JS -->
  <script type="module">
    // Import from the built distribution
    // In production, you'd use: import { createPlayer } from '@wondercabinet/audio-player';

    // For this example, we'll initialize manually since we're using a local build
    // The actual module would be imported like this:
    // import { createPlayer, analyticsPlugin } from '../../dist/wc-audio-player.es.js';

    // Simple audio URL for demo
    const demoAudioUrl = 'https://www2.cs.uic.edu/~i101/SoundFiles/BaacMetronome30.wav';

    // Initialize basic player
    async function initBasicPlayer() {
      const container = document.getElementById('player-basic');
      const waveformContainer = document.getElementById('waveform');
      const playBtn = document.getElementById('player-play-btn');
      const timeDisplay = document.getElementById('player-time');

      if (!window.WaveSurfer) {
        console.error('WaveSurfer not loaded');
        return;
      }

      const wavesurfer = WaveSurfer.create({
        container: waveformContainer,
        waveColor: 'rgba(0, 0, 38, 0.25)',
        progressColor: '#FFFAEB',
        cursorColor: '#000026',
        cursorWidth: 2,
        barWidth: 4,
        barGap: 2,
        barRadius: 3,
        height: 64,
        normalize: true,
        url: demoAudioUrl,
      });

      // Format time helper
      function formatTime(seconds) {
        if (isNaN(seconds) || !isFinite(seconds)) return '0:00';
        const mins = Math.floor(seconds / 60);
        const secs = Math.floor(seconds % 60);
        return mins + ':' + (secs < 10 ? '0' : '') + secs;
      }

      // Play/pause toggle
      playBtn.addEventListener('click', () => wavesurfer.playPause());

      // Update UI on play/pause
      wavesurfer.on('play', () => {
        playBtn.classList.add('is-playing');
        playBtn.querySelector('.wc-player-icon-play').style.display = 'none';
        playBtn.querySelector('.wc-player-icon-pause').style.display = 'flex';
      });

      wavesurfer.on('pause', () => {
        playBtn.classList.remove('is-playing');
        playBtn.querySelector('.wc-player-icon-play').style.display = 'flex';
        playBtn.querySelector('.wc-player-icon-pause').style.display = 'none';
      });

      // Update time display
      wavesurfer.on('audioprocess', () => {
        timeDisplay.textContent = formatTime(wavesurfer.getCurrentTime()) + ' / ' + formatTime(wavesurfer.getDuration());
      });

      wavesurfer.on('ready', () => {
        timeDisplay.textContent = '0:00 / ' + formatTime(wavesurfer.getDuration());
      });

      console.log('Basic player initialized');
    }

    // Initialize programmatic player
    async function initProgrammaticPlayer() {
      const container = document.getElementById('player-programmatic');
      const waveformContainer = container.querySelector('.wc-player-waveform');
      const playBtn = container.querySelector('.wc-player-play-btn');
      const timeDisplay = container.querySelector('.wc-player-time');
      const skipBackBtn = container.querySelector('.wc-player-skip-back');
      const skipForwardBtn = container.querySelector('.wc-player-skip-forward');
      const speedBtn = container.querySelector('.wc-player-speed-btn');

      const wavesurfer = WaveSurfer.create({
        container: waveformContainer,
        waveColor: 'rgba(0, 0, 38, 0.25)',
        progressColor: '#FFFAEB',
        cursorColor: '#000026',
        cursorWidth: 2,
        barWidth: 4,
        barGap: 2,
        barRadius: 3,
        height: 64,
        normalize: true,
        url: demoAudioUrl,
      });

      // Format time helper
      function formatTime(seconds) {
        if (isNaN(seconds) || !isFinite(seconds)) return '0:00';
        const mins = Math.floor(seconds / 60);
        const secs = Math.floor(seconds % 60);
        return mins + ':' + (secs < 10 ? '0' : '') + secs;
      }

      // Speed options
      const speedOptions = [0.5, 0.75, 1, 1.25, 1.5, 1.75, 2];
      let currentSpeedIndex = 2; // 1x

      // Play/pause
      playBtn.addEventListener('click', () => wavesurfer.playPause());

      // Skip buttons
      skipBackBtn.addEventListener('click', () => {
        const newTime = Math.max(0, wavesurfer.getCurrentTime() - 15);
        wavesurfer.seekTo(newTime / wavesurfer.getDuration());
      });

      skipForwardBtn.addEventListener('click', () => {
        const newTime = Math.min(wavesurfer.getDuration(), wavesurfer.getCurrentTime() + 15);
        wavesurfer.seekTo(newTime / wavesurfer.getDuration());
      });

      // Speed control
      speedBtn.addEventListener('click', () => {
        currentSpeedIndex = (currentSpeedIndex + 1) % speedOptions.length;
        const newSpeed = speedOptions[currentSpeedIndex];
        wavesurfer.setPlaybackRate(newSpeed);
        speedBtn.querySelector('.wc-player-speed-display').textContent = newSpeed + 'x';
      });

      // Update UI
      wavesurfer.on('play', () => {
        playBtn.classList.add('is-playing');
        playBtn.querySelector('.wc-player-icon-play').style.display = 'none';
        playBtn.querySelector('.wc-player-icon-pause').style.display = 'flex';
      });

      wavesurfer.on('pause', () => {
        playBtn.classList.remove('is-playing');
        playBtn.querySelector('.wc-player-icon-play').style.display = 'flex';
        playBtn.querySelector('.wc-player-icon-pause').style.display = 'none';
      });

      wavesurfer.on('audioprocess', () => {
        timeDisplay.textContent = formatTime(wavesurfer.getCurrentTime()) + ' / ' + formatTime(wavesurfer.getDuration());
      });

      wavesurfer.on('ready', () => {
        timeDisplay.textContent = '0:00 / ' + formatTime(wavesurfer.getDuration());
      });

      console.log('Programmatic player initialized');
    }

    // Initialize themed player
    async function initThemedPlayer() {
      const container = document.getElementById('player-themed');
      const waveformContainer = container.querySelector('.wc-player-waveform');
      const playBtn = container.querySelector('.wc-player-play-btn');
      const timeDisplay = container.querySelector('.wc-player-time');

      const wavesurfer = WaveSurfer.create({
        container: waveformContainer,
        waveColor: 'rgba(255, 255, 255, 0.2)',
        progressColor: '#e94560',
        cursorColor: '#e94560',
        cursorWidth: 2,
        barWidth: 4,
        barGap: 2,
        barRadius: 3,
        height: 64,
        normalize: true,
        url: demoAudioUrl,
      });

      function formatTime(seconds) {
        if (isNaN(seconds) || !isFinite(seconds)) return '0:00';
        const mins = Math.floor(seconds / 60);
        const secs = Math.floor(seconds % 60);
        return mins + ':' + (secs < 10 ? '0' : '') + secs;
      }

      playBtn.addEventListener('click', () => wavesurfer.playPause());

      wavesurfer.on('play', () => {
        playBtn.classList.add('is-playing');
        playBtn.querySelector('.wc-player-icon-play').style.display = 'none';
        playBtn.querySelector('.wc-player-icon-pause').style.display = 'flex';
      });

      wavesurfer.on('pause', () => {
        playBtn.classList.remove('is-playing');
        playBtn.querySelector('.wc-player-icon-play').style.display = 'flex';
        playBtn.querySelector('.wc-player-icon-pause').style.display = 'none';
      });

      wavesurfer.on('audioprocess', () => {
        timeDisplay.textContent = formatTime(wavesurfer.getCurrentTime()) + ' / ' + formatTime(wavesurfer.getDuration());
      });

      wavesurfer.on('ready', () => {
        timeDisplay.textContent = '0:00 / ' + formatTime(wavesurfer.getDuration());
      });

      console.log('Themed player initialized');
    }

    // Initialize all players
    document.addEventListener('DOMContentLoaded', () => {
      initBasicPlayer();
      initProgrammaticPlayer();
      initThemedPlayer();
    });
  </script>
</body>
</html>
